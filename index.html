<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Telepub Mini App с Wink Player</title>
<style>
  body {
    font-family: sans-serif;
    text-align: center;
    padding: 20px;
    background-color: #f9f9f9;
  }
  .video-container {
    max-width: 640px;
    margin: 0 auto;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
  .btn {
    margin-top: 16px;
  }
  .btn a {
    padding: 12px 28px;
    background-color: #ff3b30;
    color: white;
    font-size: 18px;
    border-radius: 8px;
    text-decoration: none;
    display: inline-block;
  }
  .btn a:hover {
    background-color: #e02c20;
  }
</style>
</head>
<body>

<h2>Telepub Mini App Test с Wink Player</h2>

<!-- Контейнер для Wink Player -->
<div id="wink-player" class="video-container"></div>

<!-- Кнопка "Купить" под видео -->
<div class="btn">
  <a href="https://brand-sense.github.io/tma_traffic_test/?utm_source=telegram&utm_medium=miniapp&utm_campaign=test_tma&utm_content=btn1"
     target="_blank">
    Купить
  </a>
</div>

<!-- UMD SDK Wink -->
<script src="https://static-adtech.wink.ru/embed-sdk/winkembed.umd.js"></script>
<script>
  // Инициализация Wink Player
  const container = document.getElementById("wink-player");

  // Вставляем фрейм плеера
  const frame = WinkEmbedSDK.api.insertFrame(container, {
    trackId: 1, // замените на реальный trackId, выданный менеджером Wink
    partnerId: 'myId3931',
    frameOptions: {
      width: "100%",
      height: "360px"
    }
  });

  // Пример подписки на событие окончания рекламы
  const { events } = WinkEmbedSDK;
  frame.on(events.AD_END, ({ ad_place_type, ad_position, duration }) => {
    console.log("Реклама завершена:", ad_place_type, ad_position, duration);
  });

  // Событие окончания видео
  frame.on(events.PLAYBACK_END, ({ content_id, ads_shown, position }) => {
    console.log("Видео завершено:", content_id, ads_shown, position);
  });
</script>

</body>
</html>
