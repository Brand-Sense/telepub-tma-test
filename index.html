<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Telepub Mini App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    body {
      margin: 0;
      background: #0f0f0f;
      color: #ffffff;
      font-family: Arial, sans-serif;
    }
    .screen {
      display: none;
      padding: 16px;
    }
    .screen.active {
      display: block;
    }
    .card {
      background: #1c1c1c;
      border-radius: 14px;
      padding: 16px;
    }
    .poster {
      width: 100%;
      border-radius: 10px;
      margin-bottom: 12px;
    }
    .btn {
      background: #5b5bff;
      padding: 14px;
      text-align: center;
      border-radius: 10px;
      margin-top: 12px;
      font-size: 16px;
      cursor: pointer;
    }
    iframe {
      width: 100%;
      height: 60vh;
      border: none;
      border-radius: 12px;
      margin-top: 12px;
    }
    .back {
      background: #2a2a2a;
    }
  </style>
</head>

<body>

<!-- SCREEN 1: INTRO -->
<div id="intro" class="screen active">
  <div class="card">
    <img
      class="poster"
      src="https://via.placeholder.com/800x450?text=TELEPUB"
      alt="Telepub preview"
    >
    <h2>Telepub</h2>
    <p>Смотрите видео прямо в Telegram</p>

    <div class="btn" onclick="openPlayer()">
      ▶️ Смотреть видео
    </div>
  </div>
</div>

<!-- SCREEN 2: PLAYER -->
<div id="player" class="screen">
  <div class="btn back" onclick="back()">
    ← Назад
  </div>

  <iframe
    id="videoFrame"
    src=""
    allow="autoplay; fullscreen; encrypted-media"
    allowfullscreen>
  </iframe>
</div>

<script>
  const tg = window.Telegram.WebApp;
  tg.ready();
  tg.expand();

  function openPlayer() {
    document.getElementById('intro').classList.remove('active');
    document.getElementById('player').classList.add('active');

    // DEMO EMBED VIDEO (Vimeo)
    document.getElementById('videoFrame').src =
      "https://player.vimeo.com/video/1022799557" +
      "?autoplay=1" +
      "&muted=1" +
      "&title=0&byline=0&portrait=0";
  }

  function back() {
    document.getElementById('player').classList.remove('active');
    document.getElementById('intro').classList.add('active');

    document.getElementById('videoFrame').src = "";
  }
</script>

</body>
</html>
